"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[2810],{3023:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(3696);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},5159:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"deployment/automated-deployment-setup","title":"Automated Deployment Setup","description":"Complete guide to setting up automated deployments with GitHub webhooks for accessibility.icjia.app.","source":"@site/docs/deployment/automated-deployment-setup.md","sourceDirName":"deployment","slug":"/deployment/automated-deployment-setup","permalink":"/docs/docs/deployment/automated-deployment-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/automated-deployment-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Laravel Forge Deployment Guide","permalink":"/docs/docs/deployment/laravel-forge"},"next":{"title":"Forge Deployment Script Setup","permalink":"/docs/docs/deployment/forge-deployment-script"}}');var l=i(2540),r=i(3023);const t={sidebar_position:2},o="Automated Deployment Setup",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Files Created/Modified",id:"files-createdmodified",level:2},{value:"1. <strong>package.json</strong> - Added &#39;forge&#39; deployment script",id:"1-packagejson---added-forge-deployment-script",level:3},{value:"2. <strong>ecosystem.config.js</strong> - Updated with documentation service",id:"2-ecosystemconfigjs---updated-with-documentation-service",level:3},{value:"3. <strong>deploy-forge.sh</strong> - Bash deployment script",id:"3-deploy-forgesh---bash-deployment-script",level:3},{value:"Laravel Forge Configuration",id:"laravel-forge-configuration",level:2},{value:"Step 1: Upload Deployment Script",id:"step-1-upload-deployment-script",level:3},{value:"Step 2: Configure Deployment Script in Forge",id:"step-2-configure-deployment-script-in-forge",level:3},{value:"Step 3: Enable GitHub Webhook",id:"step-3-enable-github-webhook",level:3},{value:"Step 4: Verify Webhook Configuration",id:"step-4-verify-webhook-configuration",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Deployment Workflow",id:"deployment-workflow",level:2},{value:"Automatic Deployment (GitHub Webhook)",id:"automatic-deployment-github-webhook",level:3},{value:"Manual Deployment (If Needed)",id:"manual-deployment-if-needed",level:3},{value:"Verification",id:"verification",level:2},{value:"After Deployment",id:"after-deployment",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Webhook Not Triggering",id:"webhook-not-triggering",level:3},{value:"Deployment Script Fails",id:"deployment-script-fails",level:3},{value:"Services Not Starting",id:"services-not-starting",level:3},{value:"Monitoring Deployments",id:"monitoring-deployments",level:2},{value:"View Deployment History",id:"view-deployment-history",level:3},{value:"View Service Logs",id:"view-service-logs",level:3},{value:"Monitor Service Status",id:"monitor-service-status",level:3},{value:"Rollback Procedure",id:"rollback-procedure",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Deployment Checklist",id:"deployment-checklist",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"automated-deployment-setup",children:"Automated Deployment Setup"})}),"\n",(0,l.jsxs)(n.p,{children:["Complete guide to setting up automated deployments with GitHub webhooks for ",(0,l.jsx)(n.code,{children:"accessibility.icjia.app"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["This setup enables automatic deployments when code is pushed to the ",(0,l.jsx)(n.code,{children:"main"})," branch:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Developer pushes to main\n        \u2193\nGitHub sends webhook to Forge\n        \u2193\nForge executes deploy-forge.sh\n        \u2193\nScript pulls latest code\n        \u2193\nScript runs: yarn install --production\n        \u2193\nScript runs: yarn build\n        \u2193\nScript restarts PM2 services\n        \u2193\nNew version live at accessibility.icjia.app\n"})}),"\n",(0,l.jsx)(n.h2,{id:"files-createdmodified",children:"Files Created/Modified"}),"\n",(0,l.jsxs)(n.h3,{id:"1-packagejson---added-forge-deployment-script",children:["1. ",(0,l.jsx)(n.strong,{children:"package.json"})," - Added 'forge' deployment script"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'"forge": "yarn install --production && yarn build && pm2 restart ecosystem.config.js || pm2 start ecosystem.config.js && pm2 save"\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What it does:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Installs production dependencies only (no dev dependencies)"}),"\n",(0,l.jsx)(n.li,{children:"Builds frontend and documentation"}),"\n",(0,l.jsx)(n.li,{children:"Restarts PM2 services (or starts them if not running)"}),"\n",(0,l.jsx)(n.li,{children:"Saves PM2 process list for persistence"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"2-ecosystemconfigjs---updated-with-documentation-service",children:["2. ",(0,l.jsx)(n.strong,{children:"ecosystem.config.js"})," - Updated with documentation service"]}),"\n",(0,l.jsx)(n.p,{children:"Now manages both services:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Backend:"})," ",(0,l.jsx)(n.code,{children:"icjia-accessibility-backend"})," on port 3001"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Documentation:"})," ",(0,l.jsx)(n.code,{children:"icjia-accessibility-docs"})," on port 3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Both services configured with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Auto-restart on crash"}),"\n",(0,l.jsx)(n.li,{children:"Logging with timestamps"}),"\n",(0,l.jsx)(n.li,{children:"Max 10 restarts"}),"\n",(0,l.jsx)(n.li,{children:"10-second minimum uptime before restart counts"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"3-deploy-forgesh---bash-deployment-script",children:["3. ",(0,l.jsx)(n.strong,{children:"deploy-forge.sh"})," - Bash deployment script"]}),"\n",(0,l.jsx)(n.p,{children:"Executed by Laravel Forge when webhook is triggered."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"12-Step Deployment Process:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Navigate to site directory"}),"\n",(0,l.jsx)(n.li,{children:"Pull latest code from GitHub"}),"\n",(0,l.jsx)(n.li,{children:"Verify Yarn installation"}),"\n",(0,l.jsx)(n.li,{children:"Install production dependencies"}),"\n",(0,l.jsx)(n.li,{children:"Build frontend and documentation"}),"\n",(0,l.jsx)(n.li,{children:"Verify build artifacts"}),"\n",(0,l.jsx)(n.li,{children:"Verify PM2 installation"}),"\n",(0,l.jsx)(n.li,{children:"Restart PM2 services"}),"\n",(0,l.jsx)(n.li,{children:"Save PM2 process list"}),"\n",(0,l.jsx)(n.li,{children:"Verify services are running"}),"\n",(0,l.jsx)(n.li,{children:"Verify ports are listening"}),"\n",(0,l.jsx)(n.li,{children:"Display PM2 status"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Color-coded logging (info, success, warning, error)"}),"\n",(0,l.jsx)(n.li,{children:"Comprehensive error handling"}),"\n",(0,l.jsx)(n.li,{children:"Automatic rollback on failure"}),"\n",(0,l.jsx)(n.li,{children:"Detailed deployment log"}),"\n",(0,l.jsx)(n.li,{children:"Service verification"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"laravel-forge-configuration",children:"Laravel Forge Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-upload-deployment-script",children:"Step 1: Upload Deployment Script"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"SSH into your Forge server:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Make the script executable:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"chmod +x /home/forge/accessibility.icjia.app/deploy-forge.sh\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-2-configure-deployment-script-in-forge",children:"Step 2: Configure Deployment Script in Forge"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Log in to Laravel Forge:"})," ",(0,l.jsx)(n.a,{href:"https://forge.laravel.com",children:"https://forge.laravel.com"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Go to Site Details \u2192 Deployment Script"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Replace the default script with:"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\ncd /home/forge/accessibility.icjia.app\nbash deploy-forge.sh\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," This simple wrapper calls our comprehensive deployment script."]}),"\n",(0,l.jsx)(n.h3,{id:"step-3-enable-github-webhook",children:"Step 3: Enable GitHub Webhook"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"In Forge, go to Site Details \u2192 Deployment"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:'Click "Enable GitHub Webhook"'})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Select your repository:"})," ",(0,l.jsx)(n.code,{children:"ICJIA/icjia-accessibility-status"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Select branch:"})," ",(0,l.jsx)(n.code,{children:"main"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:'Click "Enable"'})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Forge will automatically create a webhook in your GitHub repository."}),"\n",(0,l.jsx)(n.h3,{id:"step-4-verify-webhook-configuration",children:"Step 4: Verify Webhook Configuration"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Go to GitHub repository settings:"})," ",(0,l.jsx)(n.a,{href:"https://github.com/ICJIA/icjia-accessibility-status/settings/hooks",children:"https://github.com/ICJIA/icjia-accessibility-status/settings/hooks"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"You should see a webhook pointing to Forge"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Click on it to verify configuration"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Recent Deliveries tab shows webhook history"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,l.jsx)(n.p,{children:"Ensure these are set in Forge (Site Details \u2192 Environment):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Supabase Configuration\nVITE_SUPABASE_URL=https://your-project-ref.supabase.co\nVITE_SUPABASE_ANON_KEY=your-supabase-anon-key\n\n# API Configuration\nVITE_API_URL=https://accessibility.icjia.app/api\nFRONTEND_URL=https://accessibility.icjia.app\n\n# Server Configuration\nNODE_ENV=production\nPORT=3001\n"})}),"\n",(0,l.jsx)(n.h2,{id:"deployment-workflow",children:"Deployment Workflow"}),"\n",(0,l.jsx)(n.h3,{id:"automatic-deployment-github-webhook",children:"Automatic Deployment (GitHub Webhook)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Trigger:"})," Push to ",(0,l.jsx)(n.code,{children:"main"})," branch"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'git add .\ngit commit -m "Your changes"\ngit push origin main\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What happens:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"GitHub sends webhook to Forge"}),"\n",(0,l.jsx)(n.li,{children:"Forge executes deployment script"}),"\n",(0,l.jsx)(n.li,{children:"Script pulls latest code"}),"\n",(0,l.jsx)(n.li,{children:"Script builds and restarts services"}),"\n",(0,l.jsx)(n.li,{children:"New version live in ~2-3 minutes"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monitor deployment:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Forge \u2192 Site Details \u2192 Deployment History"}),"\n",(0,l.jsx)(n.li,{children:"Click on the deployment to see logs"}),"\n",(0,l.jsxs)(n.li,{children:["Or SSH and check: ",(0,l.jsx)(n.code,{children:"pm2 logs"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"manual-deployment-if-needed",children:"Manual Deployment (If Needed)"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"SSH into server:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ncd /home/forge/accessibility.icjia.app\nbash deploy-forge.sh\n"})}),"\n",(0,l.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,l.jsx)(n.h3,{id:"after-deployment",children:"After Deployment"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Check frontend:"})," ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app",children:"https://accessibility.icjia.app"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Should load React application"}),"\n",(0,l.jsx)(n.li,{children:"Check browser console for errors"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Check API:"})," ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app/api/health",children:"https://accessibility.icjia.app/api/health"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Should return JSON with status"}),"\n",(0,l.jsx)(n.li,{children:"Verifies backend is running"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Check docs:"})," ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app/docs",children:"https://accessibility.icjia.app/docs"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Should display Docusaurus site"}),"\n",(0,l.jsx)(n.li,{children:"Verify navigation works"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check services:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\npm2 status\npm2 logs\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"webhook-not-triggering",children:"Webhook Not Triggering"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify webhook in GitHub:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to repository settings \u2192 Webhooks"}),"\n",(0,l.jsx)(n.li,{children:"Check if webhook exists and is active"}),"\n",(0,l.jsx)(n.li,{children:'Check "Recent Deliveries" for errors'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify Forge configuration:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Site Details \u2192 Deployment"}),"\n",(0,l.jsx)(n.li,{children:"Confirm GitHub webhook is enabled"}),"\n",(0,l.jsx)(n.li,{children:"Confirm correct branch is selected"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Test webhook manually:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'In GitHub webhook settings, click "Redeliver"'}),"\n",(0,l.jsx)(n.li,{children:"Check Forge deployment history"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"deployment-script-fails",children:"Deployment Script Fails"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check deployment logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ntail -f /home/forge/.pm2/logs/deployment.log\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check PM2 logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pm2 logs icjia-accessibility-backend\npm2 logs icjia-accessibility-docs\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check Nginx logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo tail -f /var/log/nginx/accessibility.icjia.app-error.log\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"services-not-starting",children:"Services Not Starting"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify environment variables:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cat /home/forge/accessibility.icjia.app/.env\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check if ports are in use:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"lsof -i :3001\nlsof -i :3002\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Manually restart services:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pm2 restart ecosystem.config.js\npm2 status\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"monitoring-deployments",children:"Monitoring Deployments"}),"\n",(0,l.jsx)(n.h3,{id:"view-deployment-history",children:"View Deployment History"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"In Forge:"})," Site Details \u2192 Deployment History"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Shows:"})," Timestamp, branch, status, duration"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Click deployment"})," to see full logs"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"view-service-logs",children:"View Service Logs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\n\n# Backend logs\npm2 logs icjia-accessibility-backend\n\n# Documentation logs\npm2 logs icjia-accessibility-docs\n\n# Deployment logs\ntail -f /home/forge/.pm2/logs/deployment.log\n"})}),"\n",(0,l.jsx)(n.h3,{id:"monitor-service-status",children:"Monitor Service Status"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\n\n# Check all services\npm2 status\n\n# Watch services in real-time\npm2 monit\n"})}),"\n",(0,l.jsx)(n.h2,{id:"rollback-procedure",children:"Rollback Procedure"}),"\n",(0,l.jsx)(n.p,{children:"If deployment causes issues:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Identify the problematic commit:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git log --oneline -5\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Revert to previous commit:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git revert <commit-hash>\ngit push origin main\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Forge will automatically deploy the revert"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Or manually rollback:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git reset --hard <previous-commit-hash>\ngit push origin main --force\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Always test locally before pushing:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"yarn dev\nyarn build\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use meaningful commit messages:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'git commit -m "Fix: API endpoint for health check"\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monitor deployments:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check Forge deployment history"}),"\n",(0,l.jsx)(n.li,{children:"Verify endpoints after deployment"}),"\n",(0,l.jsx)(n.li,{children:"Check PM2 logs for errors"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Keep main branch stable:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use feature branches for development"}),"\n",(0,l.jsx)(n.li,{children:"Test thoroughly before merging to main"}),"\n",(0,l.jsx)(n.li,{children:"Use pull requests for code review"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Document changes:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Update README if needed"}),"\n",(0,l.jsx)(n.li,{children:"Update deployment docs if configuration changes"}),"\n",(0,l.jsx)(n.li,{children:"Add comments for complex changes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deployment-checklist",children:"Deployment Checklist"}),"\n",(0,l.jsx)(n.p,{children:"Before enabling automatic deployments:"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Environment variables set in Forge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Nginx configuration correct"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","PM2 ecosystem.config.js updated"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","deploy-forge.sh uploaded and executable"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Deployment script configured in Forge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","GitHub webhook enabled"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Manual deployment tested successfully"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Webhook test delivery successful"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All three endpoints verified working"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","PM2 logs show no errors"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Upload ",(0,l.jsx)(n.code,{children:"deploy-forge.sh"})," to server"]}),"\n",(0,l.jsxs)(n.li,{children:["Make it executable: ",(0,l.jsx)(n.code,{children:"chmod +x deploy-forge.sh"})]}),"\n",(0,l.jsx)(n.li,{children:"Configure deployment script in Forge"}),"\n",(0,l.jsx)(n.li,{children:"Enable GitHub webhook"}),"\n",(0,l.jsx)(n.li,{children:"Test with a small commit to main branch"}),"\n",(0,l.jsx)(n.li,{children:"Monitor deployment in Forge"}),"\n",(0,l.jsx)(n.li,{children:"Verify all endpoints working"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);