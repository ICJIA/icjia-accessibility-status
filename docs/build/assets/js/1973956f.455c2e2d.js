"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[8685],{2854:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"deployment/production","title":"Production Deployment","description":"Complete guide for deploying to a production Ubuntu server.","source":"@site/docs/deployment/production.md","sourceDirName":"deployment","slug":"/deployment/production","permalink":"/docs/docs/deployment/production","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/production.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Scripts Reference","permalink":"/docs/docs/deployment/deployment-scripts-reference"},"next":{"title":"Nginx Configuration","permalink":"/docs/docs/deployment/nginx"}}');var t=i(2540),l=i(3023);const a={},r="Production Deployment",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Server Setup",id:"step-1-server-setup",level:2},{value:"Update System",id:"update-system",level:3},{value:"Install Node.js",id:"install-nodejs",level:3},{value:"Install Yarn",id:"install-yarn",level:3},{value:"Install Nginx",id:"install-nginx",level:3},{value:"Install PM2",id:"install-pm2",level:3},{value:"Step 2: Clone Repository",id:"step-2-clone-repository",level:2},{value:"Step 3: Configure Environment",id:"step-3-configure-environment",level:2},{value:"Step 4: Build Application",id:"step-4-build-application",level:2},{value:"Step 5: Configure PM2",id:"step-5-configure-pm2",level:2},{value:"Step 6: Configure Nginx",id:"step-6-configure-nginx",level:2},{value:"Step 7: Setup SSL/TLS",id:"step-7-setup-ssltls",level:2},{value:"Using Let&#39;s Encrypt",id:"using-lets-encrypt",level:3},{value:"Update Nginx Configuration",id:"update-nginx-configuration",level:3},{value:"Step 8: Verify Deployment",id:"step-8-verify-deployment",level:2},{value:"Step 9: Setup Monitoring",id:"step-9-setup-monitoring",level:2},{value:"PM2 Monitoring",id:"pm2-monitoring",level:3},{value:"System Monitoring",id:"system-monitoring",level:3},{value:"Maintenance",id:"maintenance",level:2},{value:"Updating Application",id:"updating-application",level:3},{value:"Viewing Logs",id:"viewing-logs",level:3},{value:"Backup Database",id:"backup-database",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Services Won&#39;t Start",id:"services-wont-start",level:3},{value:"Nginx Not Working",id:"nginx-not-working",level:3},{value:"Database Connection Issues",id:"database-connection-issues",level:3},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"production-deployment",children:"Production Deployment"})}),"\n",(0,t.jsx)(n.p,{children:"Complete guide for deploying to a production Ubuntu server."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ubuntu 20.04 or later"}),"\n",(0,t.jsx)(n.li,{children:"SSH access to server"}),"\n",(0,t.jsx)(n.li,{children:"Domain name (optional but recommended)"}),"\n",(0,t.jsx)(n.li,{children:"SSL certificate (Let's Encrypt recommended)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-server-setup",children:"Step 1: Server Setup"}),"\n",(0,t.jsx)(n.h3,{id:"update-system",children:"Update System"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get upgrade -y\n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-nodejs",children:"Install Node.js"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install NVM\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash\n\n# Load NVM\nsource ~/.bashrc\n\n# Install Node.js 20\nnvm install 20\nnvm use 20\nnvm alias default 20\n\n# Verify installation\nnode --version\nnpm --version\n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-yarn",children:"Install Yarn"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -g yarn@1.22.22\n\n# Verify installation\nyarn --version\n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-nginx",children:"Install Nginx"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y nginx\n\n# Start Nginx\nsudo systemctl start nginx\nsudo systemctl enable nginx\n\n# Verify installation\nsudo systemctl status nginx\n"})}),"\n",(0,t.jsx)(n.h3,{id:"install-pm2",children:"Install PM2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -g pm2\n\n# Verify installation\npm2 --version\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-2-clone-repository",children:"Step 2: Clone Repository"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create app directory\nsudo mkdir -p /var/www/icjia-accessibility\nsudo chown $USER:$USER /var/www/icjia-accessibility\n\n# Clone repository\ncd /var/www/icjia-accessibility\ngit clone https://github.com/ICJIA/icjia-accessibility-status.git .\n\n# Install dependencies\nyarn install\ncd docs && yarn install && cd ..\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-3-configure-environment",children:"Step 3: Configure Environment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create .env file\ncp .env.sample .env\n\n# Edit .env with production values\nnano .env\n"})}),"\n",(0,t.jsx)(n.p,{children:"Update with your production values:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Supabase Configuration\nVITE_SUPABASE_URL=https://your-project-id.supabase.co\nVITE_SUPABASE_ANON_KEY=your-anon-key\n\n# API Configuration\nVITE_API_URL=https://example.com/api\nPORT=3001\n\n# Frontend Configuration\nFRONTEND_URL=https://example.com\n\n# Node Environment\nNODE_ENV=production\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-4-build-application",children:"Step 4: Build Application"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Build all services\nyarn build\n\n# Verify builds\nls -la dist/\nls -la docs/build/\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-5-configure-pm2",children:"Step 5: Configure PM2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Copy ecosystem configuration\ncp ecosystem.config.js /var/www/icjia-accessibility/\n\n# Start services with PM2\ncd /var/www/icjia-accessibility\npm2 start ecosystem.config.js --env production\n\n# Verify services running\npm2 status\n\n# Save PM2 configuration\npm2 save\n\n# Setup PM2 startup\npm2 startup\n# Follow the instructions to set up auto-start\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-6-configure-nginx",children:"Step 6: Configure Nginx"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Copy nginx configuration\nsudo cp nginx/icjia-accessibility.conf /etc/nginx/sites-available/\n\n# Enable site\nsudo ln -s /etc/nginx/sites-available/icjia-accessibility.conf \\\n  /etc/nginx/sites-enabled/\n\n# Remove default site\nsudo rm /etc/nginx/sites-enabled/default\n\n# Test configuration\nsudo nginx -t\n\n# Reload nginx\nsudo systemctl reload nginx\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-7-setup-ssltls",children:"Step 7: Setup SSL/TLS"}),"\n",(0,t.jsx)(n.h3,{id:"using-lets-encrypt",children:"Using Let's Encrypt"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install Certbot\nsudo apt-get install -y certbot python3-certbot-nginx\n\n# Obtain certificate\nsudo certbot certonly --nginx -d example.com -d www.example.com\n\n# Auto-renewal\nsudo systemctl enable certbot.timer\nsudo systemctl start certbot.timer\n\n# Verify renewal\nsudo certbot renew --dry-run\n"})}),"\n",(0,t.jsx)(n.h3,{id:"update-nginx-configuration",children:"Update Nginx Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Edit ",(0,t.jsx)(n.code,{children:"/etc/nginx/sites-available/icjia-accessibility.conf"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 80;\n    server_name example.com www.example.com;\n    \n    # Redirect HTTP to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name example.com www.example.com;\n    \n    # SSL certificates\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    # ... rest of configuration\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-8-verify-deployment",children:"Step 8: Verify Deployment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check PM2 status\npm2 status\n\n# Check Nginx status\nsudo systemctl status nginx\n\n# Test endpoints\ncurl http://localhost:5173\ncurl http://localhost:3001/api\ncurl http://localhost:3002\n\n# Test via domain\ncurl https://example.com\ncurl https://example.com/api\ncurl https://example.com/docs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-9-setup-monitoring",children:"Step 9: Setup Monitoring"}),"\n",(0,t.jsx)(n.h3,{id:"pm2-monitoring",children:"PM2 Monitoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# View real-time monitoring\npm2 monit\n\n# View logs\npm2 logs\n\n# Setup log rotation\npm2 install pm2-logrotate\n"})}),"\n",(0,t.jsx)(n.h3,{id:"system-monitoring",children:"System Monitoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install htop for system monitoring\nsudo apt-get install -y htop\n\n# View system resources\nhtop\n"})}),"\n",(0,t.jsx)(n.h2,{id:"maintenance",children:"Maintenance"}),"\n",(0,t.jsx)(n.h3,{id:"updating-application",children:"Updating Application"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd /var/www/icjia-accessibility\n\n# Pull latest code\ngit pull origin main\n\n# Install dependencies\nyarn install\ncd docs && yarn install && cd ..\n\n# Build\nyarn build\n\n# Restart services\npm2 restart all\n"})}),"\n",(0,t.jsx)(n.h3,{id:"viewing-logs",children:"Viewing Logs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# View all logs\npm2 logs\n\n# View specific service\npm2 logs accessibility-backend\n\n# View Nginx logs\nsudo tail -f /var/log/nginx/access.log\nsudo tail -f /var/log/nginx/error.log\n"})}),"\n",(0,t.jsx)(n.h3,{id:"backup-database",children:"Backup Database"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export Supabase database\n# Use Supabase dashboard or CLI\n\n# Store backups securely\n# Implement automated backup strategy\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"services-wont-start",children:"Services Won't Start"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check PM2 logs\npm2 logs\n\n# Check system logs\nsudo journalctl -xe\n\n# Restart services\npm2 restart all\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nginx-not-working",children:"Nginx Not Working"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Test configuration\nsudo nginx -t\n\n# Check Nginx logs\nsudo tail -f /var/log/nginx/error.log\n\n# Restart Nginx\nsudo systemctl restart nginx\n"})}),"\n",(0,t.jsx)(n.h3,{id:"database-connection-issues",children:"Database Connection Issues"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify Supabase credentials in ",(0,t.jsx)(n.code,{children:".env"})]}),"\n",(0,t.jsx)(n.li,{children:"Check network connectivity"}),"\n",(0,t.jsx)(n.li,{children:"Verify RLS policies in Supabase"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./overview",children:"Deployment Overview"})," - Deployment guide"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./nginx",children:"Nginx Configuration"})," - Nginx setup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./pm2",children:"PM2 Configuration"})," - Process management"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},3023:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(3696);const t={},l=s.createContext(t);function a(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);