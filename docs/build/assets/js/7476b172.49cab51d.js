"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[4773],{3023:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var o=i(3696);const s={},t=o.createContext(s);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(t.Provider,{value:n},e.children)}},4642:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"deployment/forge-quick-start","title":"Laravel Forge Quick Start","description":"Quick start guide for Laravel Forge deployment","source":"@site/docs/deployment/forge-quick-start.md","sourceDirName":"deployment","slug":"/deployment/forge-quick-start","permalink":"/docs/docs/deployment/forge-quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/forge-quick-start.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Laravel Forge Quick Start","sidebar_position":8,"description":"Quick start guide for Laravel Forge deployment"},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Verification","permalink":"/docs/docs/deployment/deployment-verification"},"next":{"title":"Forge Deployment Checklist","permalink":"/docs/docs/deployment/forge-checklist"}}');var s=i(2540),t=i(3023);const r={title:"Laravel Forge Quick Start",sidebar_position:8,description:"Quick start guide for Laravel Forge deployment"},l="Laravel Forge Deployment - Quick Start",a={},c=[{value:"Note: localhost vs 127.0.0.1",id:"note-localhost-vs-127001",level:2},{value:"1. Create Site in Forge",id:"1-create-site-in-forge",level:2},{value:"2. Connect GitHub Repository",id:"2-connect-github-repository",level:2},{value:"3. Set Environment Variables",id:"3-set-environment-variables",level:2},{value:"4. Update Deployment Script",id:"4-update-deployment-script",level:2},{value:"5. Configure Nginx",id:"5-configure-nginx",level:2},{value:"6. SSH and Install PM2",id:"6-ssh-and-install-pm2",level:2},{value:"7. Deploy",id:"7-deploy",level:2},{value:"8. Verify",id:"8-verify",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Services not running",id:"services-not-running",level:3},{value:"Build failed",id:"build-failed",level:3},{value:"Port conflicts",id:"port-conflicts",level:3},{value:"Automatic Deployments",id:"automatic-deployments",level:2},{value:"Full Documentation",id:"full-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"laravel-forge-deployment---quick-start",children:"Laravel Forge Deployment - Quick Start"})}),"\n",(0,s.jsx)(n.p,{children:"Quick reference for deploying ICJIA Accessibility Status Portal to your Laravel Forge server."}),"\n",(0,s.jsx)(n.h2,{id:"note-localhost-vs-127001",children:"Note: localhost vs 127.0.0.1"}),"\n",(0,s.jsxs)(n.p,{children:["Throughout this guide, you'll see both ",(0,s.jsx)(n.code,{children:"localhost"})," and ",(0,s.jsx)(n.code,{children:"127.0.0.1"})," used:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Nginx configs use ",(0,s.jsx)(n.code,{children:"127.0.0.1"})]})," - Direct IP address, no DNS lookup, more reliable for upstream proxying"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Development/testing uses ",(0,s.jsx)(n.code,{children:"localhost"})]})," - More readable, equivalent for local testing"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Both resolve to the same loopback address. In production Nginx configs, ",(0,s.jsx)(n.code,{children:"127.0.0.1"})," is preferred because it avoids DNS resolution overhead and is more predictable."]}),"\n",(0,s.jsx)(n.h2,{id:"1-create-site-in-forge",children:"1. Create Site in Forge"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Dashboard \u2192 Your Server \u2192 Create Site\n- Domain: accessibility.yourdomain.com\n- Project Type: Node.js\n- Node Version: 20\n- Root Directory: /public\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-connect-github-repository",children:"2. Connect GitHub Repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Site Details \u2192 Repository\n- Repository: ICJIA/icjia-accessibility-status\n- Branch: main\n- Click "Connect Repository"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"3-set-environment-variables",children:"3. Set Environment Variables"}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Site Details \u2192 Environment"})," and add:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"VITE_SUPABASE_URL=https://your-project-ref.supabase.co\nVITE_SUPABASE_ANON_KEY=your-supabase-anon-key\nVITE_API_URL=https://accessibility.yourdomain.com/api\nFRONTEND_URL=https://accessibility.yourdomain.com\nNODE_ENV=production\nPORT=3001\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-update-deployment-script",children:"4. Update Deployment Script"}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Site Details \u2192 Deployment Script"})," and replace with:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"#!/bin/bash\nset -e\n\ncd /home/forge/accessibility.yourdomain.com\n\n# Pull latest code\ngit pull origin main\n\n# Install dependencies\nyarn install --production\n\n# Build frontend and documentation\nyarn build\n\n# Restart backend with PM2\npm2 restart icjia-accessibility-backend || pm2 start ecosystem.config.js\npm2 save\n\n# Verify services\npm2 status\n"})}),"\n",(0,s.jsx)(n.h2,{id:"5-configure-nginx",children:"5. Configure Nginx"}),"\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Site Details \u2192 Nginx"})," and replace with:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",children:'server {\n    listen 80;\n    listen [::]:80;\n    server_name accessibility.yourdomain.com;\n    root /home/forge/accessibility.yourdomain.com/dist;\n\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    ssl_certificate /etc/nginx/ssl/accessibility.yourdomain.com/certificate.crt;\n    ssl_certificate_key /etc/nginx/ssl/accessibility.yourdomain.com/private.key;\n\n    if ($scheme != "https") {\n        return 301 https://$server_name$request_uri;\n    }\n\n    # Frontend SPA routing\n    location / {\n        try_files $uri $uri/ /index.html;\n        add_header Cache-Control "public, max-age=3600";\n    }\n\n    # API routes - proxy to backend\n    # Note: Use 127.0.0.1 (not localhost) for Nginx upstream proxying\n    # This avoids DNS resolution overhead and is more reliable in production\n    location /api/ {\n        proxy_pass http://127.0.0.1:3001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \'upgrade\';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    # Documentation routes\n    location /docs/ {\n        proxy_pass http://127.0.0.1:3002/;\n        proxy_http_version 1.1;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    # Deny access to sensitive files\n    location ~ /\\. {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # Cache static assets\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        expires 1y;\n        add_header Cache-Control "public, immutable";\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"6-ssh-and-install-pm2",children:"6. SSH and Install PM2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\n\n# Install PM2 globally\nnpm install -g pm2\n\n# Navigate to site directory\ncd /home/forge/accessibility.yourdomain.com\n\n# Create ecosystem.config.js\ncat > ecosystem.config.js << 'EOF'\nmodule.exports = {\n  apps: [\n    {\n      name: 'icjia-accessibility-backend',\n      script: 'server/index.ts',\n      interpreter: 'tsx',\n      instances: 1,\n      exec_mode: 'fork',\n      env: {\n        NODE_ENV: 'production',\n        PORT: 3001\n      },\n      error_file: '/home/forge/.pm2/logs/backend-error.log',\n      out_file: '/home/forge/.pm2/logs/backend-out.log',\n      autorestart: true,\n      max_memory_restart: '500M'\n    },\n    {\n      name: 'icjia-accessibility-docs',\n      script: 'yarn',\n      args: 'workspace icjia-accessibility-docs start',\n      instances: 1,\n      exec_mode: 'fork',\n      env: {\n        NODE_ENV: 'production',\n        PORT: 3002\n      },\n      error_file: '/home/forge/.pm2/logs/docs-error.log',\n      out_file: '/home/forge/.pm2/logs/docs-out.log',\n      autorestart: true\n    }\n  ]\n};\nEOF\n\n# Start services\npm2 start ecosystem.config.js\npm2 save\npm2 startup\n"})}),"\n",(0,s.jsx)(n.h2,{id:"7-deploy",children:"7. Deploy"}),"\n",(0,s.jsxs)(n.p,{children:["In Forge: ",(0,s.jsx)(n.strong,{children:'Click "Deploy Now"'})," on your site"]}),"\n",(0,s.jsxs)(n.p,{children:["Monitor deployment in ",(0,s.jsx)(n.strong,{children:"Site Details \u2192 Deployment History"})]}),"\n",(0,s.jsx)(n.h2,{id:"8-verify",children:"8. Verify"}),"\n",(0,s.jsx)(n.p,{children:"Check that everything is working:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# SSH into server\nssh forge@your-server-ip\n\n# Check PM2 status\npm2 status\n\n# View logs\npm2 logs\n\n# Check ports\nlsof -i :3001\nlsof -i :3002\n"})}),"\n",(0,s.jsx)(n.p,{children:"Visit:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Frontend: ",(0,s.jsx)(n.a,{href:"https://accessibility.yourdomain.com",children:"https://accessibility.yourdomain.com"})]}),"\n",(0,s.jsxs)(n.li,{children:["API: ",(0,s.jsx)(n.a,{href:"https://accessibility.yourdomain.com/api/health",children:"https://accessibility.yourdomain.com/api/health"})]}),"\n",(0,s.jsxs)(n.li,{children:["Docs: ",(0,s.jsx)(n.a,{href:"https://accessibility.yourdomain.com/docs",children:"https://accessibility.yourdomain.com/docs"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"services-not-running",children:"Services not running"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pm2 restart all\npm2 logs\n"})}),"\n",(0,s.jsx)(n.h3,{id:"build-failed",children:"Build failed"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /home/forge/accessibility.yourdomain.com\nyarn install --production\nyarn build\n"})}),"\n",(0,s.jsx)(n.h3,{id:"port-conflicts",children:"Port conflicts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"lsof -i :3001\nlsof -i :3002\n"})}),"\n",(0,s.jsx)(n.h2,{id:"automatic-deployments",children:"Automatic Deployments"}),"\n",(0,s.jsx)(n.p,{children:"Enable auto-deploy in Forge:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Site Details \u2192 Deployment"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:'Enable "Auto Deploy"'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Select branch: main"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Now every push to ",(0,s.jsx)(n.code,{children:"main"})," automatically deploys!"]}),"\n",(0,s.jsx)(n.h2,{id:"full-documentation",children:"Full Documentation"}),"\n",(0,s.jsxs)(n.p,{children:["See the complete guide at: ",(0,s.jsx)(n.code,{children:"docs/docs/deployment/laravel-forge.md"})]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);