"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[1154],{30:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"deployment/automated-deployment-complete","title":"Automated Deployment Complete","description":"Automated deployment workflow completion summary","source":"@site/docs/deployment/automated-deployment-complete.md","sourceDirName":"deployment","slug":"/deployment/automated-deployment-complete","permalink":"/docs/docs/deployment/automated-deployment-complete","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/automated-deployment-complete.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Automated Deployment Complete","sidebar_position":6,"description":"Automated deployment workflow completion summary"},"sidebar":"tutorialSidebar","previous":{"title":"Automated Deployment Setup","permalink":"/docs/docs/deployment/automated-deployment"},"next":{"title":"Deployment Verification","permalink":"/docs/docs/deployment/deployment-verification"}}');var l=i(2540),r=i(3023);const o={title:"Automated Deployment Complete",sidebar_position:6,description:"Automated deployment workflow completion summary"},t="\u2705 Automated Deployment Workflow Complete",c={},d=[{value:"What Was Completed",id:"what-was-completed",level:2},{value:"1. <strong>Package.json - Added &#39;forge&#39; Deployment Script</strong> \u2705",id:"1-packagejson---added-forge-deployment-script-",level:3},{value:"2. <strong>ecosystem.config.js - Enhanced with Documentation Service</strong> \u2705",id:"2-ecosystemconfigjs---enhanced-with-documentation-service-",level:3},{value:"Backend Service",id:"backend-service",level:4},{value:"Documentation Service",id:"documentation-service",level:4},{value:"3. <strong>deploy-forge.sh - 12-Step Deployment Script</strong> \u2705",id:"3-deploy-forgesh---12-step-deployment-script-",level:3},{value:"4. <strong>Documentation Created</strong> \u2705",id:"4-documentation-created-",level:3},{value:"AUTOMATED_DEPLOYMENT_SETUP.md",id:"automated_deployment_setupmd",level:4},{value:"DEPLOYMENT_SCRIPTS_REFERENCE.md",id:"deployment_scripts_referencemd",level:4},{value:"Deployment Flow",id:"deployment-flow",level:2},{value:"Setup Checklist",id:"setup-checklist",level:2},{value:"Before First Deployment",id:"before-first-deployment",level:3},{value:"Step-by-Step Setup",id:"step-by-step-setup",level:3},{value:"Deployment Workflow",id:"deployment-workflow",level:2},{value:"Automatic Deployment (GitHub Webhook)",id:"automatic-deployment-github-webhook",level:3},{value:"Manual Deployment",id:"manual-deployment",level:3},{value:"Verification",id:"verification",level:2},{value:"After Deployment",id:"after-deployment",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Webhook Not Triggering",id:"webhook-not-triggering",level:3},{value:"Deployment Script Fails",id:"deployment-script-fails",level:3},{value:"Services Not Starting",id:"services-not-starting",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"View Deployment History",id:"view-deployment-history",level:3},{value:"View Service Logs",id:"view-service-logs",level:3},{value:"Monitor Services",id:"monitor-services",level:3},{value:"Rollback",id:"rollback",level:2},{value:"Files Modified/Created",id:"files-modifiedcreated",level:2},{value:"Modified",id:"modified",level:3},{value:"Created",id:"created",level:3},{value:"Key Features",id:"key-features",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Status: \u2705 READY FOR AUTOMATED DEPLOYMENTS",id:"status--ready-for-automated-deployments",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"-automated-deployment-workflow-complete",children:"\u2705 Automated Deployment Workflow Complete"})}),"\n",(0,l.jsxs)(n.p,{children:["Automated deployment with GitHub webhooks is now fully configured for ",(0,l.jsx)(n.code,{children:"accessibility.icjia.app"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"what-was-completed",children:"What Was Completed"}),"\n",(0,l.jsxs)(n.h3,{id:"1-packagejson---added-forge-deployment-script-",children:["1. ",(0,l.jsx)(n.strong,{children:"Package.json - Added 'forge' Deployment Script"})," \u2705"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'"forge": "yarn install --production && yarn build && pm2 restart ecosystem.config.js || pm2 start ecosystem.config.js && pm2 save"\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What it does:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Installs production dependencies only (no dev dependencies)"}),"\n",(0,l.jsx)(n.li,{children:"Builds frontend and documentation"}),"\n",(0,l.jsx)(n.li,{children:"Restarts PM2 services (or starts them if not running)"}),"\n",(0,l.jsx)(n.li,{children:"Saves PM2 process list for persistence"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"yarn forge\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"2-ecosystemconfigjs---enhanced-with-documentation-service-",children:["2. ",(0,l.jsx)(n.strong,{children:"ecosystem.config.js - Enhanced with Documentation Service"})," \u2705"]}),"\n",(0,l.jsxs)(n.p,{children:["Now manages ",(0,l.jsx)(n.strong,{children:"both services"}),":"]}),"\n",(0,l.jsx)(n.h4,{id:"backend-service",children:"Backend Service"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Name:"})," ",(0,l.jsx)(n.code,{children:"icjia-accessibility-backend"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Script:"})," ",(0,l.jsx)(n.code,{children:"server/index.ts"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Interpreter:"})," ",(0,l.jsx)(n.code,{children:"tsx"})," (TypeScript runtime)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Port:"})," 3001"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Auto-restart:"})," Enabled"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Logging:"})," Timestamps, error and output logs"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"documentation-service",children:"Documentation Service"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Name:"})," ",(0,l.jsx)(n.code,{children:"icjia-accessibility-docs"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Script:"})," ",(0,l.jsx)(n.code,{children:"yarn workspace icjia-accessibility-docs start"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Port:"})," 3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Auto-restart:"})," Enabled"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Logging:"})," Timestamps, error and output logs"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Both services configured with:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Auto-restart on crash"}),"\n",(0,l.jsx)(n.li,{children:"Max 10 restarts"}),"\n",(0,l.jsx)(n.li,{children:"10-second minimum uptime before restart counts"}),"\n",(0,l.jsx)(n.li,{children:"Logging with timestamps"}),"\n",(0,l.jsx)(n.li,{children:"Separate error and output logs"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"3-deploy-forgesh---12-step-deployment-script-",children:["3. ",(0,l.jsx)(n.strong,{children:"deploy-forge.sh - 12-Step Deployment Script"})," \u2705"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Location:"})," ",(0,l.jsx)(n.code,{children:"/home/forge/accessibility.icjia.app/deploy-forge.sh"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"12-Step Process:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Navigate to site directory"}),"\n",(0,l.jsx)(n.li,{children:"Pull latest code from GitHub"}),"\n",(0,l.jsx)(n.li,{children:"Verify Yarn installation"}),"\n",(0,l.jsx)(n.li,{children:"Install production dependencies"}),"\n",(0,l.jsx)(n.li,{children:"Build frontend and documentation"}),"\n",(0,l.jsx)(n.li,{children:"Verify build artifacts"}),"\n",(0,l.jsx)(n.li,{children:"Verify PM2 installation"}),"\n",(0,l.jsx)(n.li,{children:"Restart PM2 services"}),"\n",(0,l.jsx)(n.li,{children:"Save PM2 process list"}),"\n",(0,l.jsx)(n.li,{children:"Verify services are running"}),"\n",(0,l.jsx)(n.li,{children:"Verify ports are listening"}),"\n",(0,l.jsx)(n.li,{children:"Display PM2 status"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Features:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Color-coded logging (info, success, warning, error)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Comprehensive error handling"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Automatic rollback on failure"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Detailed deployment log"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Service verification"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Port verification"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Timestamp logging"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Execution:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Automatic (via GitHub webhook)\n# Or manual:\nssh forge@your-server-ip\nbash /home/forge/accessibility.icjia.app/deploy-forge.sh\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"4-documentation-created-",children:["4. ",(0,l.jsx)(n.strong,{children:"Documentation Created"})," \u2705"]}),"\n",(0,l.jsx)(n.h4,{id:"automated_deployment_setupmd",children:"AUTOMATED_DEPLOYMENT_SETUP.md"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Complete setup guide"}),"\n",(0,l.jsx)(n.li,{children:"Laravel Forge configuration steps"}),"\n",(0,l.jsx)(n.li,{children:"GitHub webhook setup"}),"\n",(0,l.jsx)(n.li,{children:"Environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Deployment workflow"}),"\n",(0,l.jsx)(n.li,{children:"Verification steps"}),"\n",(0,l.jsx)(n.li,{children:"Troubleshooting guide"}),"\n",(0,l.jsx)(n.li,{children:"Monitoring procedures"}),"\n",(0,l.jsx)(n.li,{children:"Rollback procedure"}),"\n",(0,l.jsx)(n.li,{children:"Best practices"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"deployment_scripts_referencemd",children:"DEPLOYMENT_SCRIPTS_REFERENCE.md"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Quick reference for all scripts"}),"\n",(0,l.jsx)(n.li,{children:"Package.json scripts explained"}),"\n",(0,l.jsx)(n.li,{children:"PM2 commands reference"}),"\n",(0,l.jsx)(n.li,{children:"Deployment workflow"}),"\n",(0,l.jsx)(n.li,{children:"Environment variables"}),"\n",(0,l.jsx)(n.li,{children:"Verification commands"}),"\n",(0,l.jsx)(n.li,{children:"Troubleshooting commands"}),"\n",(0,l.jsx)(n.li,{children:"Deployment checklist"}),"\n",(0,l.jsx)(n.li,{children:"Quick start guide"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deployment-flow",children:"Deployment Flow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Developer pushes to main branch\n        \u2193\nGitHub sends webhook to Forge\n        \u2193\nForge executes: bash deploy-forge.sh\n        \u2193\nScript pulls latest code from GitHub\n        \u2193\nScript runs: yarn install --production\n        \u2193\nScript runs: yarn build\n        \u2193\nScript restarts PM2 services\n        \u2193\nServices verified running\n        \u2193\nPorts verified listening\n        \u2193\nNew version live at accessibility.icjia.app\n        \u2193\nDeployment complete (~2-3 minutes)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"setup-checklist",children:"Setup Checklist"}),"\n",(0,l.jsx)(n.h3,{id:"before-first-deployment",children:"Before First Deployment"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Upload ",(0,l.jsx)(n.code,{children:"deploy-forge.sh"})," to server"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Make script executable: ",(0,l.jsx)(n.code,{children:"chmod +x deploy-forge.sh"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure deployment script in Forge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable GitHub webhook in Forge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Set environment variables in Forge"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test manual deployment"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify all endpoints working"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-by-step-setup",children:"Step-by-Step Setup"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. Upload Deployment Script"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scp deploy-forge.sh forge@your-server-ip:/home/forge/accessibility.icjia.app/\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. Make Executable"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\nchmod +x /home/forge/accessibility.icjia.app/deploy-forge.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3. Configure in Forge"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Site Details \u2192 Deployment Script"}),"\n",(0,l.jsxs)(n.li,{children:["Replace with: ",(0,l.jsx)(n.code,{children:"bash deploy-forge.sh"})]}),"\n",(0,l.jsx)(n.li,{children:"Click Save"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"4. Enable GitHub Webhook"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Site Details \u2192 Deployment"}),"\n",(0,l.jsx)(n.li,{children:'Click "Enable GitHub Webhook"'}),"\n",(0,l.jsxs)(n.li,{children:["Select repository: ",(0,l.jsx)(n.code,{children:"ICJIA/icjia-accessibility-status"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select branch: ",(0,l.jsx)(n.code,{children:"main"})]}),"\n",(0,l.jsx)(n.li,{children:"Click Enable"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"5. Verify Environment Variables"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Site Details \u2192 Environment"}),"\n",(0,l.jsxs)(n.li,{children:["Verify all required variables are set:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VITE_SUPABASE_URL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VITE_SUPABASE_ANON_KEY"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VITE_API_URL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"FRONTEND_URL"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"NODE_ENV=production"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"PORT=3001"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"6. Test Manual Deployment"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ncd /home/forge/accessibility.icjia.app\nbash deploy-forge.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"7. Verify Endpoints"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Frontend: ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app",children:"https://accessibility.icjia.app"})]}),"\n",(0,l.jsxs)(n.li,{children:["API: ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app/api/health",children:"https://accessibility.icjia.app/api/health"})]}),"\n",(0,l.jsxs)(n.li,{children:["Docs: ",(0,l.jsx)(n.a,{href:"https://accessibility.icjia.app/docs",children:"https://accessibility.icjia.app/docs"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deployment-workflow",children:"Deployment Workflow"}),"\n",(0,l.jsx)(n.h3,{id:"automatic-deployment-github-webhook",children:"Automatic Deployment (GitHub Webhook)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Trigger:"})," Push to ",(0,l.jsx)(n.code,{children:"main"})," branch"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'git add .\ngit commit -m "Your changes"\ngit push origin main\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What happens:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"GitHub sends webhook to Forge"}),"\n",(0,l.jsx)(n.li,{children:"Forge executes deployment script"}),"\n",(0,l.jsx)(n.li,{children:"Script pulls latest code"}),"\n",(0,l.jsx)(n.li,{children:"Script builds and restarts services"}),"\n",(0,l.jsx)(n.li,{children:"New version live in ~2-3 minutes"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monitor:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Forge: Site Details \u2192 Deployment History"}),"\n",(0,l.jsxs)(n.li,{children:["Server: ",(0,l.jsx)(n.code,{children:"pm2 logs"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"manual-deployment",children:"Manual Deployment"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option 1: Forge UI"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to Site Details \u2192 Deployment"}),"\n",(0,l.jsx)(n.li,{children:'Click "Deploy Now"'}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option 2: SSH"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ncd /home/forge/accessibility.icjia.app\nbash deploy-forge.sh\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option 3: Yarn"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ncd /home/forge/accessibility.icjia.app\nyarn forge\n"})}),"\n",(0,l.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,l.jsx)(n.h3,{id:"after-deployment",children:"After Deployment"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. Check Frontend"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://accessibility.icjia.app\n"})}),"\n",(0,l.jsx)(n.p,{children:"Should return HTML of React application."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. Check API"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://accessibility.icjia.app/api/health\n"})}),"\n",(0,l.jsx)(n.p,{children:"Should return JSON with status information."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3. Check Documentation"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://accessibility.icjia.app/docs\n"})}),"\n",(0,l.jsx)(n.p,{children:"Should return Docusaurus site HTML."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"4. Check Services"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\npm2 status\n"})}),"\n",(0,l.jsx)(n.p,{children:'Both services should show "online".'}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"webhook-not-triggering",children:"Webhook Not Triggering"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Verify webhook in GitHub settings"}),"\n",(0,l.jsx)(n.li,{children:'Check "Recent Deliveries" for errors'}),"\n",(0,l.jsx)(n.li,{children:"Verify Forge webhook is enabled"}),"\n",(0,l.jsx)(n.li,{children:"Test webhook manually (Redeliver)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"deployment-script-fails",children:"Deployment Script Fails"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\ntail -f /home/forge/.pm2/logs/deployment.log\npm2 logs\n"})}),"\n",(0,l.jsx)(n.h3,{id:"services-not-starting",children:"Services Not Starting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check environment variables\ncat /home/forge/accessibility.icjia.app/.env\n\n# Check ports\nlsof -i :3001\nlsof -i :3002\n\n# Restart manually\npm2 restart ecosystem.config.js\n"})}),"\n",(0,l.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,l.jsx)(n.h3,{id:"view-deployment-history",children:"View Deployment History"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Forge: Site Details \u2192 Deployment History"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"view-service-logs",children:"View Service Logs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\n\n# Backend\npm2 logs icjia-accessibility-backend\n\n# Documentation\npm2 logs icjia-accessibility-docs\n\n# Deployment\ntail -f /home/forge/.pm2/logs/deployment.log\n"})}),"\n",(0,l.jsx)(n.h3,{id:"monitor-services",children:"Monitor Services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\npm2 monit\n"})}),"\n",(0,l.jsx)(n.h2,{id:"rollback",children:"Rollback"}),"\n",(0,l.jsx)(n.p,{children:"If deployment causes issues:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Revert to previous commit\ngit revert <commit-hash>\ngit push origin main\n\n# Forge will automatically deploy the revert\n"})}),"\n",(0,l.jsx)(n.p,{children:"Or manually:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git reset --hard <previous-commit-hash>\ngit push origin main --force\n"})}),"\n",(0,l.jsx)(n.h2,{id:"files-modifiedcreated",children:"Files Modified/Created"}),"\n",(0,l.jsx)(n.h3,{id:"modified",children:"Modified"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"package.json"})," - Added 'forge' script"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ecosystem.config.js"})," - Added docs service"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"created",children:"Created"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"deploy-forge.sh"})," - Deployment script"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AUTOMATED_DEPLOYMENT_SETUP.md"})," - Setup guide"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DEPLOYMENT_SCRIPTS_REFERENCE.md"})," - Quick reference"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Automated Deployments"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"GitHub webhook triggers deployment"}),"\n",(0,l.jsx)(n.li,{children:"No manual intervention needed"}),"\n",(0,l.jsx)(n.li,{children:"Automatic on every push to main"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Comprehensive Verification"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Build artifacts verified"}),"\n",(0,l.jsx)(n.li,{children:"Services verified running"}),"\n",(0,l.jsx)(n.li,{children:"Ports verified listening"}),"\n",(0,l.jsx)(n.li,{children:"Detailed logging"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Error Handling"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Automatic rollback on failure"}),"\n",(0,l.jsx)(n.li,{children:"Service restart on error"}),"\n",(0,l.jsx)(n.li,{children:"Detailed error logging"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Monitoring"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Color-coded logging"}),"\n",(0,l.jsx)(n.li,{children:"Deployment history in Forge"}),"\n",(0,l.jsx)(n.li,{children:"PM2 logs for debugging"}),"\n",(0,l.jsx)(n.li,{children:"Service status monitoring"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Best Practices"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Production dependencies only"}),"\n",(0,l.jsx)(n.li,{children:"Proper error handling"}),"\n",(0,l.jsx)(n.li,{children:"Service verification"}),"\n",(0,l.jsx)(n.li,{children:"Comprehensive logging"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Upload deploy-forge.sh to server"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scp deploy-forge.sh forge@your-server-ip:/home/forge/accessibility.icjia.app/\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Make executable"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ssh forge@your-server-ip\nchmod +x /home/forge/accessibility.icjia.app/deploy-forge.sh\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Configure in Forge"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Site Details \u2192 Deployment Script"}),"\n",(0,l.jsxs)(n.li,{children:["Add: ",(0,l.jsx)(n.code,{children:"bash deploy-forge.sh"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Enable GitHub webhook"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Site Details \u2192 Deployment"}),"\n",(0,l.jsx)(n.li,{children:"Enable GitHub Webhook"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Test deployment"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Make a small commit to main"}),"\n",(0,l.jsx)(n.li,{children:"Watch deployment in Forge"}),"\n",(0,l.jsx)(n.li,{children:"Verify endpoints"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Monitor"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check Forge deployment history"}),"\n",(0,l.jsx)(n.li,{children:"Review PM2 logs"}),"\n",(0,l.jsx)(n.li,{children:"Verify services running"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"status--ready-for-automated-deployments",children:"Status: \u2705 READY FOR AUTOMATED DEPLOYMENTS"}),"\n",(0,l.jsxs)(n.p,{children:["All components are in place for automated deployments with GitHub webhooks. Follow the setup checklist above to enable automatic deployments for ",(0,l.jsx)(n.code,{children:"accessibility.icjia.app"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Expected Result:"}),"\nWhen code is pushed to GitHub main branch \u2192 Forge receives webhook \u2192 Deployment script runs \u2192 Dependencies updated \u2192 Frontend/docs built \u2192 PM2 services restarted \u2192 New version live in ~2-3 minutes."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},3023:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var s=i(3696);const l={},r=s.createContext(l);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);