"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[9343],{3023:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var i=t(3696);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},7712:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"deployment/deployment-flow","title":"Deployment Flow Diagram","description":"Visual diagram of the deployment flow","source":"@site/docs/deployment/deployment-flow.md","sourceDirName":"deployment","slug":"/deployment/deployment-flow","permalink":"/docs/docs/deployment/deployment-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/deployment/deployment-flow.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"title":"Deployment Flow Diagram","sidebar_position":11,"description":"Visual diagram of the deployment flow"},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Complete","permalink":"/docs/docs/deployment/deployment-complete"},"next":{"title":"Docusaurus Deployment","permalink":"/docs/docs/deployment/docusaurus-deployment"}}');var s=t(2540),r=t(3023);const o={title:"Deployment Flow Diagram",sidebar_position:11,description:"Visual diagram of the deployment flow"},c="Laravel Forge Deployment Flow for accessibility.icjia.app",a={},l=[{value:"Complete Deployment Architecture",id:"complete-deployment-architecture",level:2},{value:"Request Flow Examples",id:"request-flow-examples",level:2},{value:"1. Frontend Request",id:"1-frontend-request",level:3},{value:"2. API Request",id:"2-api-request",level:3},{value:"3. Documentation Request",id:"3-documentation-request",level:3},{value:"Deployment Process Flow",id:"deployment-process-flow",level:2},{value:"Service Startup Order",id:"service-startup-order",level:2},{value:"Monitoring and Maintenance",id:"monitoring-and-maintenance",level:2},{value:"Automatic Deployment Flow",id:"automatic-deployment-flow",level:2},{value:"Key Ports and Services",id:"key-ports-and-services",level:2},{value:"Environment Variables Flow",id:"environment-variables-flow",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"laravel-forge-deployment-flow-for-accessibilityicjiaapp",children:"Laravel Forge Deployment Flow for accessibility.icjia.app"})}),"\n",(0,s.jsx)(n.h2,{id:"complete-deployment-architecture",children:"Complete Deployment Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Internet Users                               \u2502\n\u2502              (https://accessibility.icjia.app)                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Nginx Reverse Proxy                           \u2502\n\u2502              (Port 80/443 with SSL/TLS)                         \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 HTTP \u2192 HTTPS Redirect                                  \u2502   \u2502\n\u2502  \u2502 SSL Certificate: Let's Encrypt (auto-managed by Forge) \u2502   \u2502\n\u2502  \u2502 Gzip Compression: Enabled                              \u2502   \u2502\n\u2502  \u2502 Security Headers: X-Content-Type-Options, X-Frame-Options\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Location: /  \u2502 Location: /api/ \u2502 Location: /docs/     \u2502    \u2502\n\u2502  \u2502              \u2502                 \u2502                      \u2502    \u2502\n\u2502  \u2502 Frontend     \u2502 API Proxy       \u2502 Docs Proxy           \u2502    \u2502\n\u2502  \u2502 SPA Routing  \u2502 to 127.0.0.1:3001 \u2502 to 127.0.0.1:3002 \u2502    \u2502\n\u2502  \u2502              \u2502                 \u2502                      \u2502    \u2502\n\u2502  \u2502 try_files    \u2502 proxy_pass      \u2502 proxy_pass           \u2502    \u2502\n\u2502  \u2502 /index.html  \u2502 Headers:        \u2502 Headers:             \u2502    \u2502\n\u2502  \u2502              \u2502 - X-Real-IP     \u2502 - X-Real-IP          \u2502    \u2502\n\u2502  \u2502 Cache:       \u2502 - X-Forwarded-* \u2502 - X-Forwarded-*      \u2502    \u2502\n\u2502  \u2502 3600s        \u2502 - Upgrade       \u2502 - Timeout: 60s       \u2502    \u2502\n\u2502  \u2502              \u2502 - Timeout: 60s  \u2502                      \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                    \u2502                    \u2502\n         \u25bc                    \u25bc                    \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502  Frontend   \u2502   \u2502   Backend    \u2502   \u2502 Documentation\n    \u2502  (Port 5173)\u2502   \u2502  (Port 3001) \u2502   \u2502  (Port 3002) \u2502\n    \u2502             \u2502   \u2502              \u2502   \u2502              \u2502\n    \u2502 React SPA   \u2502   \u2502 Express.js   \u2502   \u2502 Docusaurus   \u2502\n    \u2502 - Vite build\u2502   \u2502 - API routes \u2502   \u2502 - Static site\u2502\n    \u2502 - dist/     \u2502   \u2502 - CORS       \u2502   \u2502 - Search     \u2502\n    \u2502 - index.html\u2502   \u2502 - Auth       \u2502   \u2502 - Navigation \u2502\n    \u2502             \u2502   \u2502 - Database   \u2502   \u2502              \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                    \u2502                    \u2502\n         \u2502                    \u25bc                    \u2502\n         \u2502            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n         \u2502            \u2502  Supabase    \u2502            \u2502\n         \u2502            \u2502  PostgreSQL  \u2502            \u2502\n         \u2502            \u2502              \u2502            \u2502\n         \u2502            \u2502 - Users      \u2502            \u2502\n         \u2502            \u2502 - Sites      \u2502            \u2502\n         \u2502            \u2502 - Scores     \u2502            \u2502\n         \u2502            \u2502 - Activity   \u2502            \u2502\n         \u2502            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n         \u2502                    \u25b2                    \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    (API Requests)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"request-flow-examples",children:"Request Flow Examples"}),"\n",(0,s.jsx)(n.h3,{id:"1-frontend-request",children:"1. Frontend Request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"User visits: https://accessibility.icjia.app\n                    \u2193\nNginx receives request on port 443 (HTTPS)\n                    \u2193\nNginx matches location / (root)\n                    \u2193\nNginx serves from /home/forge/accessibility.icjia.app/dist/\n                    \u2193\ntry_files $uri $uri/ /index.html\n                    \u2193\nReact app loads in browser\n                    \u2193\nFrontend makes API calls to /api/...\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-api-request",children:"2. API Request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Frontend calls: https://accessibility.icjia.app/api/health\n                    \u2193\nNginx receives request on port 443 (HTTPS)\n                    \u2193\nNginx matches location /api/\n                    \u2193\nNginx proxies to http://127.0.0.1:3001/health\n                    \u2193\nExpress backend receives request\n                    \u2193\nBackend checks database connection\n                    \u2193\nBackend returns JSON response\n                    \u2193\nNginx proxies response back to frontend\n                    \u2193\nFrontend receives JSON data\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-documentation-request",children:"3. Documentation Request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"User visits: https://accessibility.icjia.app/docs\n                    \u2193\nNginx receives request on port 443 (HTTPS)\n                    \u2193\nNginx matches location /docs/\n                    \u2193\nNginx proxies to http://127.0.0.1:3002/\n                    \u2193\nDocusaurus receives request\n                    \u2193\nDocusaurus serves documentation page\n                    \u2193\nNginx proxies response back to user\n                    \u2193\nUser sees documentation site\n"})}),"\n",(0,s.jsx)(n.h2,{id:"deployment-process-flow",children:"Deployment Process Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Step 1: Create Site in Forge                 \u2502\n\u2502                                                                 \u2502\n\u2502  - Domain: accessibility.icjia.app                              \u2502\n\u2502  - Project Type: Node.js                                        \u2502\n\u2502  - Node Version: 20                                             \u2502\n\u2502  - Root Directory: /public                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Step 2: Connect GitHub Repository                  \u2502\n\u2502                                                                 \u2502\n\u2502  - Repository: ICJIA/icjia-accessibility-status                 \u2502\n\u2502  - Branch: main                                                 \u2502\n\u2502  - Forge clones to: /home/forge/accessibility.icjia.app         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Step 3: Set Environment Variables                     \u2502\n\u2502                                                                 \u2502\n\u2502  - VITE_SUPABASE_URL                                            \u2502\n\u2502  - VITE_SUPABASE_ANON_KEY                                       \u2502\n\u2502  - VITE_API_URL=https://accessibility.icjia.app/api             \u2502\n\u2502  - FRONTEND_URL=https://accessibility.icjia.app                 \u2502\n\u2502  - NODE_ENV=production                                          \u2502\n\u2502  - PORT=3001                                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Step 4: Create Deployment Script                        \u2502\n\u2502                                                                 \u2502\n\u2502  - Pull latest code from main                                   \u2502\n\u2502  - Install dependencies (yarn install --production)             \u2502\n\u2502  - Build frontend and docs (yarn build)                         \u2502\n\u2502  - Restart backend with PM2                                     \u2502\n\u2502  - Verify services running                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          Step 5: Configure Nginx                                \u2502\n\u2502                                                                 \u2502\n\u2502  - Frontend routing (/)                                         \u2502\n\u2502  - API proxy (/api/)                                            \u2502\n\u2502  - Docs proxy (/docs/)                                          \u2502\n\u2502  - SSL configuration                                            \u2502\n\u2502  - Security headers                                             \u2502\n\u2502  - Gzip compression                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Step 6: Install PM2 and Configure                        \u2502\n\u2502                                                                 \u2502\n\u2502  - SSH into server                                              \u2502\n\u2502  - Install PM2 globally                                         \u2502\n\u2502  - Create ecosystem.config.js                                   \u2502\n\u2502  - Start services (pm2 start ecosystem.config.js)               \u2502\n\u2502  - Setup startup (pm2 startup)                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Step 7: Initial Setup (First Time Only)                  \u2502\n\u2502                                                                 \u2502\n\u2502  - Install Yarn 1.22.22                                         \u2502\n\u2502  - Create .env file from .env.sample                            \u2502\n\u2502  - Configure environment variables                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Step 8: Deploy                                     \u2502\n\u2502                                                                 \u2502\n\u2502  - Click "Deploy Now" in Forge                                  \u2502\n\u2502  - Monitor deployment progress                                  \u2502\n\u2502  - Verify services running                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Step 9: Verify Deployment                             \u2502\n\u2502                                                                 \u2502\n\u2502  - Check frontend: https://accessibility.icjia.app              \u2502\n\u2502  - Check API: https://accessibility.icjia.app/api/health        \u2502\n\u2502  - Check docs: https://accessibility.icjia.app/docs             \u2502\n\u2502  - Check logs for errors                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              \u2705 Deployment Complete!                            \u2502\n\u2502                                                                 \u2502\n\u2502  All three services running on single domain                    \u2502\n\u2502  Automatic deployments enabled                                  \u2502\n\u2502  Ready for production use                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,s.jsx)(n.h2,{id:"service-startup-order",children:"Service Startup Order"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1. Nginx starts (listens on 80/443)\n   \u2193\n2. PM2 starts backend (Express on 3001)\n   \u2193\n3. PM2 starts documentation (Docusaurus on 3002)\n   \u2193\n4. Nginx routes traffic to services\n   \u2193\n5. Services ready to receive requests\n"})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-and-maintenance",children:"Monitoring and Maintenance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Daily:\n  - Check PM2 status: pm2 status\n  - Check health endpoint: curl https://accessibility.icjia.app/api/health\n  - Review error logs: pm2 logs\n\nWeekly:\n  - Review PM2 logs for warnings\n  - Check Nginx error logs\n  - Verify all services running\n  - Test frontend, API, docs\n\nMonthly:\n  - Review SSL certificate expiration (auto-renewed by Forge)\n  - Check disk space usage\n  - Review application logs for patterns\n  - Test automatic deployments\n"})}),"\n",(0,s.jsx)(n.h2,{id:"automatic-deployment-flow",children:"Automatic Deployment Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Developer pushes to main branch\n                    \u2193\nGitHub webhook triggers Forge\n                    \u2193\nForge runs deployment script\n                    \u2193\nScript pulls latest code\n                    \u2193\nScript installs dependencies\n                    \u2193\nScript builds frontend and docs\n                    \u2193\nScript restarts backend\n                    \u2193\nNew version live at https://accessibility.icjia.app\n"})}),"\n",(0,s.jsx)(n.h2,{id:"key-ports-and-services",children:"Key Ports and Services"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Service"}),(0,s.jsx)(n.th,{children:"Port"}),(0,s.jsx)(n.th,{children:"Protocol"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Nginx"}),(0,s.jsx)(n.td,{children:"80"}),(0,s.jsx)(n.td,{children:"HTTP"}),(0,s.jsx)(n.td,{children:"Redirect to HTTPS"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Nginx"}),(0,s.jsx)(n.td,{children:"443"}),(0,s.jsx)(n.td,{children:"HTTPS"}),(0,s.jsx)(n.td,{children:"Main entry point"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Frontend"}),(0,s.jsx)(n.td,{children:"5173"}),(0,s.jsx)(n.td,{children:"HTTP"}),(0,s.jsx)(n.td,{children:"Vite dev server (dev only)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Backend"}),(0,s.jsx)(n.td,{children:"3001"}),(0,s.jsx)(n.td,{children:"HTTP"}),(0,s.jsx)(n.td,{children:"Express API (internal)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Docs"}),(0,s.jsx)(n.td,{children:"3002"}),(0,s.jsx)(n.td,{children:"HTTP"}),(0,s.jsx)(n.td,{children:"Docusaurus (internal)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Supabase"}),(0,s.jsx)(n.td,{children:"443"}),(0,s.jsx)(n.td,{children:"HTTPS"}),(0,s.jsx)(n.td,{children:"Database (external)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables-flow",children:"Environment Variables Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Forge Environment Variables\n            \u2193\n.env file on server\n            \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                         \u2502\n\u251c\u2500\u2192 Backend (Express)                    \u2502\n\u2502   - PORT=3001                          \u2502\n\u2502   - NODE_ENV=production                \u2502\n\u2502   - VITE_SUPABASE_URL                  \u2502\n\u2502   - VITE_SUPABASE_ANON_KEY             \u2502\n\u2502   - FRONTEND_URL (for CORS)            \u2502\n\u2502                                         \u2502\n\u251c\u2500\u2192 Frontend (React)                     \u2502\n\u2502   - VITE_SUPABASE_URL                  \u2502\n\u2502   - VITE_SUPABASE_ANON_KEY             \u2502\n\u2502   - VITE_API_URL                       \u2502\n\u2502                                         \u2502\n\u2514\u2500\u2192 Documentation (Docusaurus)           \u2502\n    - NODE_ENV=production                \u2502\n    - PORT=3002                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);