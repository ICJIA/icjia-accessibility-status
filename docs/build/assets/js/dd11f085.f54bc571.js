"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[3030],{3023:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>l});var i=n(3696);const t={},r=i.createContext(t);function d(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(r.Provider,{value:s},e.children)}},7973:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"api/sites","title":"Sites API","description":"Endpoints for managing websites and their accessibility scores.","source":"@site/docs/api/sites.md","sourceDirName":"api","slug":"/api/sites","permalink":"/docs/docs/api/sites","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/api/sites.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"API Authentication","permalink":"/docs/docs/api/authentication"},"next":{"title":"API Keys","permalink":"/docs/docs/api/api-keys"}}');var t=n(2540),r=n(3023);const d={},l="Sites API",c={},a=[{value:"List Sites",id:"list-sites",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Response",id:"response",level:3},{value:"Get Site Details",id:"get-site-details",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Response",id:"response-1",level:3},{value:"Create Site",id:"create-site",level:2},{value:"Authentication",id:"authentication-1",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Parameters",id:"parameters-1",level:3},{value:"Response",id:"response-2",level:3},{value:"Update Site",id:"update-site",level:2},{value:"Authentication",id:"authentication-2",level:3},{value:"Request Body",id:"request-body-1",level:3},{value:"Response",id:"response-3",level:3},{value:"Delete Site",id:"delete-site",level:2},{value:"Authentication",id:"authentication-3",level:3},{value:"Response",id:"response-4",level:3},{value:"Import Sites",id:"import-sites",level:2},{value:"Authentication",id:"authentication-4",level:3},{value:"Request Body",id:"request-body-2",level:3},{value:"Parameters",id:"parameters-2",level:3},{value:"Response",id:"response-5",level:3},{value:"Examples",id:"examples",level:2},{value:"Create a Site with cURL",id:"create-a-site-with-curl",level:3},{value:"Import Sites with Node.js",id:"import-sites-with-nodejs",level:3},{value:"See Also",id:"see-also",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sites-api",children:"Sites API"})}),"\n",(0,t.jsx)(s.p,{children:"Endpoints for managing websites and their accessibility scores."}),"\n",(0,t.jsx)(s.h2,{id:"list-sites",children:"List Sites"}),"\n",(0,t.jsx)(s.p,{children:"Get all monitored sites."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"GET /api/sites\n"})}),"\n",(0,t.jsx)(s.h3,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Session cookie (web frontend)"}),"\n",(0,t.jsxs)(s.li,{children:["API key with ",(0,t.jsx)(s.code,{children:"sites:read"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"response",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "123",\n      "name": "ICJIA Main Website",\n      "url": "https://www.icjia.state.il.us",\n      "axe_score": 85,\n      "lighthouse_score": 90,\n      "created_at": "2024-01-15T10:30:00Z",\n      "updated_at": "2024-01-20T14:45:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"get-site-details",children:"Get Site Details"}),"\n",(0,t.jsx)(s.p,{children:"Get information about a specific site."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"GET /api/sites/:id\n"})}),"\n",(0,t.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"id"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Site ID"})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"response-1",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "id": "123",\n    "name": "ICJIA Main Website",\n    "url": "https://www.icjia.state.il.us",\n    "axe_score": 85,\n    "lighthouse_score": 90,\n    "created_at": "2024-01-15T10:30:00Z",\n    "updated_at": "2024-01-20T14:45:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"create-site",children:"Create Site"}),"\n",(0,t.jsx)(s.p,{children:"Create a new site to monitor."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"POST /api/sites\n"})}),"\n",(0,t.jsx)(s.h3,{id:"authentication-1",children:"Authentication"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Session cookie (admin only)"}),"\n",(0,t.jsxs)(s.li,{children:["API key with ",(0,t.jsx)(s.code,{children:"sites:write"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"request-body",children:"Request Body"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "name": "New Site",\n  "url": "https://newsite.com",\n  "axe_score": 80,\n  "lighthouse_score": 85\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Required"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"name"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Site name"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"url"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Site URL"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"axe_score"})}),(0,t.jsx)(s.td,{children:"number"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Axe accessibility score (0-100)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"lighthouse_score"})}),(0,t.jsx)(s.td,{children:"number"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Lighthouse accessibility score (0-100)"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"response-2",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "id": "456",\n    "name": "New Site",\n    "url": "https://newsite.com",\n    "axe_score": 80,\n    "lighthouse_score": 85,\n    "created_at": "2024-01-21T10:00:00Z",\n    "updated_at": "2024-01-21T10:00:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"update-site",children:"Update Site"}),"\n",(0,t.jsx)(s.p,{children:"Update an existing site."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"PUT /api/sites/:id\n"})}),"\n",(0,t.jsx)(s.h3,{id:"authentication-2",children:"Authentication"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Session cookie (admin only)"}),"\n",(0,t.jsxs)(s.li,{children:["API key with ",(0,t.jsx)(s.code,{children:"sites:write"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"request-body-1",children:"Request Body"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "name": "Updated Site Name",\n  "axe_score": 88,\n  "lighthouse_score": 92\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"response-3",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "id": "456",\n    "name": "Updated Site Name",\n    "url": "https://newsite.com",\n    "axe_score": 88,\n    "lighthouse_score": 92,\n    "created_at": "2024-01-21T10:00:00Z",\n    "updated_at": "2024-01-21T11:30:00Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"delete-site",children:"Delete Site"}),"\n",(0,t.jsx)(s.p,{children:"Delete a site from monitoring."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"DELETE /api/sites/:id\n"})}),"\n",(0,t.jsx)(s.h3,{id:"authentication-3",children:"Authentication"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Session cookie (admin only)"}),"\n",(0,t.jsxs)(s.li,{children:["API key with ",(0,t.jsx)(s.code,{children:"sites:delete"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"response-4",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "message": "Site deleted successfully"\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"import-sites",children:"Import Sites"}),"\n",(0,t.jsx)(s.p,{children:"Import multiple sites via API."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"POST /api/sites/import\n"})}),"\n",(0,t.jsx)(s.h3,{id:"authentication-4",children:"Authentication"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["API key with ",(0,t.jsx)(s.code,{children:"sites:write"})," scope"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"request-body-2",children:"Request Body"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "sites": [\n    {\n      "name": "Site 1",\n      "url": "https://site1.com",\n      "axe_score": 85,\n      "lighthouse_score": 90\n    },\n    {\n      "name": "Site 2",\n      "url": "https://site2.com",\n      "axe_score": 75,\n      "lighthouse_score": 80\n    }\n  ],\n  "payload_description": "Batch import from CI/CD pipeline"\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Required"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"sites"})}),(0,t.jsx)(s.td,{children:"array"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Array of site objects"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"payload_description"})}),(0,t.jsx)(s.td,{children:"string"}),(0,t.jsx)(s.td,{children:"Yes"}),(0,t.jsx)(s.td,{children:"Description of the import (Git-style commit message)"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"response-5",children:"Response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "imported": 2,\n    "duplicates": 0,\n    "errors": 0,\n    "sites": [\n      {\n        "id": "789",\n        "name": "Site 1",\n        "url": "https://site1.com",\n        "axe_score": 85,\n        "lighthouse_score": 90\n      },\n      {\n        "id": "790",\n        "name": "Site 2",\n        "url": "https://site2.com",\n        "axe_score": 75,\n        "lighthouse_score": 80\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(s.h3,{id:"create-a-site-with-curl",children:"Create a Site with cURL"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -X POST http://localhost:3001/api/sites \\\n  -H "Authorization: Bearer sk_live_xxxxx" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Example Site",\n    "url": "https://example.com",\n    "axe_score": 85,\n    "lighthouse_score": 90\n  }\'\n'})}),"\n",(0,t.jsx)(s.h3,{id:"import-sites-with-nodejs",children:"Import Sites with Node.js"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const apiKey = process.env.API_KEY;\n\nconst response = await fetch('http://localhost:3001/api/sites/import', {\n  method: 'POST',\n  headers: {\n    'Authorization': `Bearer ${apiKey}`,\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({\n    sites: [\n      {\n        name: 'Site 1',\n        url: 'https://site1.com',\n        axe_score: 85,\n        lighthouse_score: 90,\n      },\n    ],\n    payload_description: 'Automated import from CI/CD',\n  }),\n});\n\nconst result = await response.json();\nconsole.log(`Imported ${result.data.imported} sites`);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./overview",children:"API Overview"})," - API reference"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./authentication",children:"API Authentication"})," - How to authenticate"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"./api-keys",children:"API Keys"})," - How to create API keys"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);