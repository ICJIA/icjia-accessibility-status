"use strict";(self.webpackChunkicjia_accessibility_docs=self.webpackChunkicjia_accessibility_docs||[]).push([[9295],{3023:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>d});var s=n(3696);const r={},l=s.createContext(r);function t(e){const i=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:i},e.children)}},5881:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"api/api-keys","title":"API Keys","description":"Manage API keys for programmatic access to the ICJIA Accessibility Portal.","source":"@site/docs/api/api-keys.md","sourceDirName":"api","slug":"/api/api-keys","permalink":"/docs/docs/api/api-keys","draft":false,"unlisted":false,"editUrl":"https://github.com/ICJIA/icjia-accessibility-status/tree/main/docs/docs/api/api-keys.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Sites API","permalink":"/docs/docs/api/sites"},"next":{"title":"Monorepo Setup","permalink":"/docs/docs/setup/monorepo-setup"}}');var r=n(2540),l=n(3023);const t={},d="API Keys",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Creating API Keys",id:"creating-api-keys",level:2},{value:"Via Admin Panel",id:"via-admin-panel",level:3},{value:"Via API",id:"via-api",level:3},{value:"API Key Scopes",id:"api-key-scopes",level:2},{value:"sites",id:"sites",level:3},{value:"sites",id:"sites-1",level:3},{value:"sites",id:"sites-2",level:3},{value:"Using API Keys",id:"using-api-keys",level:2},{value:"In Environment Variables",id:"in-environment-variables",level:3},{value:"In Node.js",id:"in-nodejs",level:3},{value:"In cURL",id:"in-curl",level:3},{value:"In Python",id:"in-python",level:3},{value:"Listing API Keys",id:"listing-api-keys",level:2},{value:"Via Admin Panel",id:"via-admin-panel-1",level:3},{value:"Via API",id:"via-api-1",level:3},{value:"Revoking API Keys",id:"revoking-api-keys",level:2},{value:"Via Admin Panel",id:"via-admin-panel-2",level:3},{value:"Via API",id:"via-api-2",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Invalid API Key&quot; Error",id:"invalid-api-key-error",level:3},{value:"&quot;Unauthorized&quot; Error",id:"unauthorized-error",level:3},{value:"&quot;Forbidden&quot; Error",id:"forbidden-error",level:3},{value:"See Also",id:"see-also",level:2}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"api-keys",children:"API Keys"})}),"\n",(0,r.jsx)(i.p,{children:"Manage API keys for programmatic access to the ICJIA Accessibility Portal."}),"\n",(0,r.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(i.p,{children:"API keys allow external services and CI/CD pipelines to authenticate with the API without using admin credentials."}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u2705 Granular permission scopes"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Optional expiration dates"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Usage tracking and audit trail"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Easy revocation"}),"\n",(0,r.jsx)(i.li,{children:"\u2705 Multiple keys per admin"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"creating-api-keys",children:"Creating API Keys"}),"\n",(0,r.jsx)(i.h3,{id:"via-admin-panel",children:"Via Admin Panel"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Log in to the admin panel (",(0,r.jsx)(i.code,{children:"/admin"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:'"API Keys"'})," in the sidebar"]}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:'"Create New API Key"'})]}),"\n",(0,r.jsxs)(i.li,{children:["Fill in the form:","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Key Name"}),': Descriptive name (e.g., "CI/CD Pipeline")']}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Scopes"}),": Select required permissions"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Expiration Date"}),": Optional"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Notes"}),": Optional description"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:'"Create API Key"'})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Copy the key immediately"})," (displayed only once)"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"via-api",children:"Via API"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"POST /api/api-keys\n"})}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Authentication:"})," Session cookie (admin only)"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Request Body:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "name": "CI/CD Pipeline",\n  "scopes": ["sites:read", "sites:write"],\n  "expires_at": "2025-12-31T23:59:59Z",\n  "notes": "Used for automated site imports"\n}\n'})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Response:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "data": {\n    "id": "key_123",\n    "name": "CI/CD Pipeline",\n    "key": "sk_live_xxxxx...",\n    "scopes": ["sites:read", "sites:write"],\n    "created_at": "2024-01-21T10:00:00Z",\n    "expires_at": "2025-12-31T23:59:59Z",\n    "last_used_at": null\n  }\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"api-key-scopes",children:"API Key Scopes"}),"\n",(0,r.jsxs)(i.h3,{id:"sites",children:["sites",":read"]}),"\n",(0,r.jsx)(i.p,{children:"Read-only access to site data:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"GET /api/sites"})," - List all sites"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"GET /api/sites/:id"})," - Get site details"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"GET /api/score-history"})," - Get historical scores"]}),"\n"]}),"\n",(0,r.jsxs)(i.h3,{id:"sites-1",children:["sites",":write"]}),"\n",(0,r.jsx)(i.p,{children:"Create and update site data:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"POST /api/sites"})," - Create new site"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"PUT /api/sites/:id"})," - Update site"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"POST /api/sites/import"})," - Import sites via API"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"POST /api/score-history"})," - Add new score record"]}),"\n"]}),"\n",(0,r.jsxs)(i.h3,{id:"sites-2",children:["sites",":delete"]}),"\n",(0,r.jsx)(i.p,{children:"Delete site data:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"DELETE /api/sites/:id"})," - Delete site"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"using-api-keys",children:"Using API Keys"}),"\n",(0,r.jsx)(i.h3,{id:"in-environment-variables",children:"In Environment Variables"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# .env file\nAPI_KEY=sk_live_xxxxx...\n"})}),"\n",(0,r.jsx)(i.h3,{id:"in-nodejs",children:"In Node.js"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-javascript",children:"const apiKey = process.env.API_KEY;\n\nconst response = await fetch('https://example.com/api/sites', {\n  headers: {\n    'Authorization': `Bearer ${apiKey}`,\n  },\n});\n"})}),"\n",(0,r.jsx)(i.h3,{id:"in-curl",children:"In cURL"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:'curl -H "Authorization: Bearer sk_live_xxxxx" \\\n  https://example.com/api/sites\n'})}),"\n",(0,r.jsx)(i.h3,{id:"in-python",children:"In Python"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"import requests\n\nheaders = {\n    'Authorization': f'Bearer {api_key}',\n}\n\nresponse = requests.get(\n    'https://example.com/api/sites',\n    headers=headers\n)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"listing-api-keys",children:"Listing API Keys"}),"\n",(0,r.jsx)(i.h3,{id:"via-admin-panel-1",children:"Via Admin Panel"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Log in to the admin panel (",(0,r.jsx)(i.code,{children:"/admin"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:'"API Keys"'})," in the sidebar"]}),"\n",(0,r.jsxs)(i.li,{children:["View all created keys with their:","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Name"}),"\n",(0,r.jsx)(i.li,{children:"Scopes"}),"\n",(0,r.jsx)(i.li,{children:"Creation date"}),"\n",(0,r.jsx)(i.li,{children:"Expiration date"}),"\n",(0,r.jsx)(i.li,{children:"Last used date"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"via-api-1",children:"Via API"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"GET /api/api-keys\n"})}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Authentication:"})," Session cookie (admin only)"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Response:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "id": "key_123",\n      "name": "CI/CD Pipeline",\n      "scopes": ["sites:read", "sites:write"],\n      "created_at": "2024-01-21T10:00:00Z",\n      "expires_at": "2025-12-31T23:59:59Z",\n      "last_used_at": "2024-01-21T14:30:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"revoking-api-keys",children:"Revoking API Keys"}),"\n",(0,r.jsx)(i.h3,{id:"via-admin-panel-2",children:"Via Admin Panel"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Go to ",(0,r.jsx)(i.code,{children:"/admin/api-keys"})]}),"\n",(0,r.jsx)(i.li,{children:"Find the key you want to revoke"}),"\n",(0,r.jsxs)(i.li,{children:["Click the ",(0,r.jsx)(i.strong,{children:'"Revoke"'})," button"]}),"\n",(0,r.jsx)(i.li,{children:"Confirm the action"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Once revoked, the key cannot be used for authentication."}),"\n",(0,r.jsx)(i.h3,{id:"via-api-2",children:"Via API"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"DELETE /api/api-keys/:id\n"})}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Authentication:"})," Session cookie (admin only)"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Response:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "message": "API key revoked successfully"\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Never commit API keys"})," to version control"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use environment variables"})," to store keys"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Rotate keys regularly"})," for security"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use specific scopes"})," - Only grant necessary permissions"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Set expiration dates"})," when possible"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Revoke unused keys"})," immediately"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Monitor usage"})," in the activity log"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use HTTPS"})," in production (never HTTP)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Store securely"})," - Use secrets management tools"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Audit regularly"})," - Check which keys are in use"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(i.h3,{id:"invalid-api-key-error",children:'"Invalid API Key" Error'}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Check that the key is correct"}),"\n",(0,r.jsx)(i.li,{children:"Verify the key hasn't been revoked"}),"\n",(0,r.jsx)(i.li,{children:"Ensure the key has the required scopes"}),"\n",(0,r.jsx)(i.li,{children:"Check that the key hasn't expired"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"unauthorized-error",children:'"Unauthorized" Error'}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Verify the ",(0,r.jsx)(i.code,{children:"Authorization"})," header format: ",(0,r.jsx)(i.code,{children:"Bearer sk_live_xxxxx"})]}),"\n",(0,r.jsx)(i.li,{children:"Check that the API key is valid"}),"\n",(0,r.jsx)(i.li,{children:"Ensure the key has the required scopes"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"forbidden-error",children:'"Forbidden" Error'}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"The API key doesn't have the required scope"}),"\n",(0,r.jsx)(i.li,{children:"Create a new key with the necessary permissions"}),"\n",(0,r.jsx)(i.li,{children:"Or use a key with broader permissions"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"./overview",children:"API Overview"})," - API reference"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"./authentication",children:"API Authentication"})," - Authentication methods"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"./sites",children:"Sites Endpoint"})," - Sites management"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);